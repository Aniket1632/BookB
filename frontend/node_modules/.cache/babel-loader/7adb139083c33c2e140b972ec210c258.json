{"ast":null,"code":"var _jsxFileName = \"E:\\\\D-Disk folders\\\\office projects\\\\barberly\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { Fragment, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport { io } from 'socket.io-client';\nimport Navigation from './navigation';\nimport './App.css';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport { ToastContainer } from 'react-toastify';\nimport { getUserByTokenAction } from './redux/actions/userActions';\nimport { getAllEnabledSalonListAction } from './redux/actions/salonActions';\nimport { BASE_SOCKET_URL } from './redux/actions/ip';\nimport CongratulationModal from '../../frontend/src/components/ConragatulationModal/CongratulationModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const dispatch = useDispatch();\n  const [socket, setSocket] = React.useState(null);\n  const userLogin = useSelector(state => state.userLogin);\n  const userData = useSelector(state => state.getUserInfo);\n  const [isModalOpen, setIsModalOpen] = useState(true);\n  useEffect(() => {\n    setIsModalOpen(true);\n  }, []);\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n  };\n\n  // console.log(userData, 'userData')\n\n  // const setupSocket = React.useCallback(\n  // \tid => {\n  // \t\tconst newSocket = io.connect(BASE_SOCKET_URL, {\n  // \t\t  query: {\n\n  // \t\t\ttimezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n  // \t\t  },\n  // \t\t});\n\n  // \t\tnewSocket.on('disconnect', () => {\n  // \t\t  setSocket(null);\n  // \t\t  setTimeout(setupSocket, 3000);\n  // \t\t  console.log('connected')\n  // \t\t  // toast.error('You went offline!', {\n  // \t\t  //   style: {\n  // \t\t  //     borderRadius: '10px',\n  // \t\t  //     background: '#3C0016',\n  // \t\t  //     color: '#fff',\n  // \t\t  //   },\n  // \t\t  // });\n  // \t\t});\n\n  // \t\tnewSocket.on('connect', () => {\n  // \t\t  // toast.success('You are now online!', {\n  // \t\t  //   style: {\n  // \t\t  //     borderRadius: '10px',\n  // \t\t  //     background: '#3C0016',\n  // \t\t  //     color: '#fff',\n  // \t\t  //   },\n  // \t\t  // });\n  // \t\t});\n\n  // \t\tsetSocket(newSocket);\n  // \t},\n  // \t[socket]\n  //   );\n\n  useEffect(() => {\n    if (userLogin && userLogin.userInfo && userLogin.userInfo.status && userData && userData.userInfo && userData.userInfo.data) {\n      var _userData$userInfo$da, _userData$userInfo$da2, _userData$userInfo$da3, _userData$userInfo$da4;\n      const socket = io(BASE_SOCKET_URL, {\n        query: {\n          stylist: (_userData$userInfo$da = userData.userInfo.data) === null || _userData$userInfo$da === void 0 ? void 0 : _userData$userInfo$da._id,\n          role: (_userData$userInfo$da2 = userData.userInfo.data) === null || _userData$userInfo$da2 === void 0 ? void 0 : _userData$userInfo$da2.role,\n          salon: (_userData$userInfo$da3 = userData.userInfo.data) === null || _userData$userInfo$da3 === void 0 ? void 0 : (_userData$userInfo$da4 = _userData$userInfo$da3.salon) === null || _userData$userInfo$da4 === void 0 ? void 0 : _userData$userInfo$da4._id\n        }\n      });\n      setSocket(socket);\n      socket.on('connection', data => {});\n      return () => {\n        socket.disconnect();\n      };\n    }\n  }, [userLogin, userData]);\n  useEffect(() => {\n    if (socket) {\n      socket.on('appointment-request', obj => {\n        if (obj && obj !== null && obj !== void 0 && obj.message) {\n          console.log(obj, 'obj');\n          toast.success(obj === null || obj === void 0 ? void 0 : obj.message);\n        }\n      });\n    }\n  }, [socket]);\n  useEffect(() => {\n    dispatch(getUserByTokenAction());\n    dispatch(getAllEnabledSalonListAction());\n  }, [dispatch]);\n  useEffect(() => {\n    if (userLogin && userLogin.userInfo) {\n      var _userLogin$userInfo$d;\n      console.log(\"User login info:\", userLogin.userInfo);\n\n      // Check if `isFirstLogin` is true and the role is \"stylist\"\n      if (userLogin.userInfo.isFirstLogin && ((_userLogin$userInfo$d = userLogin.userInfo.data) === null || _userLogin$userInfo$d === void 0 ? void 0 : _userLogin$userInfo$d.role) === 'stylist') {\n        console.log(\"This is the first login for a stylist!\");\n        setIsModalOpen(true); // Show the congratulation modal\n      } else {\n        console.log(\"This is not the first login or the user is not a stylist.\");\n      }\n    }\n  }, [userLogin]);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navigation, {\n      userLogin: userLogin,\n      socket: socket\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"bottom-right\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 4\n    }, this), isModalOpen && /*#__PURE__*/_jsxDEV(CongratulationModal, {\n      coins: 50,\n      onClose: handleCloseModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 3\n  }, this);\n};\n_s(App, \"CL1ZBwsSKnwPEwVQwn5jQCFCwZA=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","Fragment","useEffect","useState","useDispatch","useSelector","io","Navigation","toast","ToastContainer","getUserByTokenAction","getAllEnabledSalonListAction","BASE_SOCKET_URL","CongratulationModal","jsxDEV","_jsxDEV","App","_s","dispatch","socket","setSocket","userLogin","state","userData","getUserInfo","isModalOpen","setIsModalOpen","handleCloseModal","userInfo","status","data","_userData$userInfo$da","_userData$userInfo$da2","_userData$userInfo$da3","_userData$userInfo$da4","query","stylist","_id","role","salon","on","disconnect","obj","message","console","log","success","_userLogin$userInfo$d","isFirstLogin","children","fileName","_jsxFileName","lineNumber","columnNumber","position","coins","onClose","_c","$RefreshReg$"],"sources":["E:/D-Disk folders/office projects/barberly/frontend/src/App.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\nimport { io } from 'socket.io-client';\r\nimport Navigation from './navigation';\r\nimport './App.css';\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\n\r\nimport { ToastContainer } from 'react-toastify';\r\nimport { getUserByTokenAction } from './redux/actions/userActions';\r\nimport { getAllEnabledSalonListAction } from './redux/actions/salonActions';\r\nimport { BASE_SOCKET_URL } from './redux/actions/ip';\r\nimport CongratulationModal from '../../frontend/src/components/ConragatulationModal/CongratulationModal'\r\n\r\n\r\nconst App = () => {\r\n\tconst dispatch = useDispatch();\r\n\tconst [socket, setSocket] = React.useState(null);\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst userData = useSelector((state) => state.getUserInfo);\r\n\r\n\tconst [isModalOpen, setIsModalOpen] = useState(true);\r\n\r\n    useEffect(() => {\r\n        setIsModalOpen(true); \r\n\t}, []);\r\n\t\r\n\tconst handleCloseModal = () => {\r\n        setIsModalOpen(false); \r\n    };\r\n\r\n\r\n\t// console.log(userData, 'userData')\r\n\r\n\t// const setupSocket = React.useCallback(\r\n\t// \tid => {\r\n\t// \t\tconst newSocket = io.connect(BASE_SOCKET_URL, {\r\n\t// \t\t  query: {\r\n\r\n\t// \t\t\ttimezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\r\n\t// \t\t  },\r\n\t// \t\t});\r\n\r\n\r\n\t// \t\tnewSocket.on('disconnect', () => {\r\n\t// \t\t  setSocket(null);\r\n\t// \t\t  setTimeout(setupSocket, 3000);\r\n\t// \t\t  console.log('connected')\r\n\t// \t\t  // toast.error('You went offline!', {\r\n\t// \t\t  //   style: {\r\n\t// \t\t  //     borderRadius: '10px',\r\n\t// \t\t  //     background: '#3C0016',\r\n\t// \t\t  //     color: '#fff',\r\n\t// \t\t  //   },\r\n\t// \t\t  // });\r\n\t// \t\t});\r\n\r\n\t// \t\tnewSocket.on('connect', () => {\r\n\t// \t\t  // toast.success('You are now online!', {\r\n\t// \t\t  //   style: {\r\n\t// \t\t  //     borderRadius: '10px',\r\n\t// \t\t  //     background: '#3C0016',\r\n\t// \t\t  //     color: '#fff',\r\n\t// \t\t  //   },\r\n\t// \t\t  // });\r\n\t// \t\t});\r\n\r\n\t// \t\tsetSocket(newSocket);\r\n\t// \t},\r\n\t// \t[socket]\r\n\t//   );\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tif (\r\n\t\t\tuserLogin &&\r\n\t\t\tuserLogin.userInfo &&\r\n\t\t\tuserLogin.userInfo.status &&\r\n\t\t\tuserData &&\r\n\t\t\tuserData.userInfo &&\r\n\t\t\tuserData.userInfo.data\r\n\t\t) {\r\n\t\t\tconst socket = io(BASE_SOCKET_URL, {\r\n\t\t\t\tquery: {\r\n\t\t\t\t\tstylist: userData.userInfo.data?._id,\r\n\t\t\t\t\trole: userData.userInfo.data?.role,\r\n\t\t\t\t\tsalon: userData.userInfo.data?.salon?._id,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tsetSocket(socket);\r\n\t\t\tsocket.on('connection', (data) => {\r\n\t\t\t});\r\n\r\n\t\t\treturn () => {\r\n\t\t\t\tsocket.disconnect();\r\n\t\t\t};\r\n\t\t}\r\n\t}, [userLogin, userData]);\r\n\r\n\tuseEffect(() =>{\r\n\t\tif(socket){\r\n\t\tsocket.on('appointment-request', (obj) => {\r\n\t\t\tif (obj && obj?.message) {\r\n\t\t\t\tconsole.log(obj, 'obj')\r\n\t\t\t\ttoast.success(obj?.message)\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t},[socket])\r\n\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tdispatch(getUserByTokenAction());\r\n\t\t\tdispatch(getAllEnabledSalonListAction());\r\n\t\t},\r\n\t\t[dispatch]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userLogin && userLogin.userInfo) {\r\n\t\t\tconsole.log(\"User login info:\", userLogin.userInfo);\r\n\t\r\n\t\t\t// Check if `isFirstLogin` is true and the role is \"stylist\"\r\n\t\t\tif (userLogin.userInfo.isFirstLogin && userLogin.userInfo.data?.role === 'stylist') {\r\n\t\t\t\tconsole.log(\"This is the first login for a stylist!\");\r\n\t\t\t\tsetIsModalOpen(true);  // Show the congratulation modal\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"This is not the first login or the user is not a stylist.\");\r\n\t\t\t}\r\n\t\t}\r\n\t}, [userLogin]);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Navigation userLogin={userLogin} socket={socket} />\r\n\t\t\t<ToastContainer position='bottom-right' />\r\n\t\t\t{isModalOpen &&\r\n\t\t\t<CongratulationModal \r\n\t\t\t\tcoins={50}\r\n\t\t\t\tonClose={handleCloseModal}\r\n            />}\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}